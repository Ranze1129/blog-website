"use strict";(self["webpackChunkblog_client"]=self["webpackChunkblog_client"]||[]).push([[377],{3377:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"user"}},[a("section",{staticClass:"user-info"},[a("img",{staticClass:"avatar",attrs:{src:t.user.avatar,alt:t.user.username}}),a("h3",[t._v(t._s(t.user.username))])]),a("section",t._l(t.blogs,(function(e){return a("router-link",{key:e.id,staticClass:"item",attrs:{to:"/detail/"+e.id}},[a("div",{staticClass:"date"},[a("span",{staticClass:"day"},[t._v(t._s(t.splitDate(e.createdAt).date))]),a("span",{staticClass:"month"},[t._v(t._s(t.splitDate(e.createdAt).month)+"月")]),a("span",{staticClass:"year"},[t._v(t._s(t.splitDate(e.createdAt).year)+"年")])]),a("h3",[t._v(t._s(e.title))]),a("p",[t._v(t._s(e.description))])])})),1),a("section",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total/2,"current-page":t.page},on:{"current-change":t.onPageChange}})],1)])},s=[],r=a(9726),o=a(7491),i={data:function(){return{blogs:[],user:{},page:1,total:0}},created:function(){var t=this;this.userId=this.$route.params.userId,this.page=this.$route.query.page||1,o.Z.getBlogsByUserId(this.userId,{page:this.page}).then((function(e){t.page=e.page,t.total=e.total,t.blogs=e.data,e.data.length>0&&(t.user=e.data[0].user)}))},methods:{onPageChange:function(t){var e=this;o.Z.getBlogsByUserId(this.userId,{page:t}).then((function(a){e.blogs=a.data,e.total=a.total,e.page=a.page,e.$router.push({path:"/user/".concat(e.userId),query:{page:t}})}))},splitDate:function(t){var e="object"===(0,r.Z)(t)?t:new Date(t);return{date:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}}}},l=i,g=a(1001),d=(0,g.Z)(l,n,s,!1,null,null,null),u=d.exports},7491:function(t,e,a){a(4916),a(5306),a(2526),a(1817);var n=a(8505),s={GET_LIST:"/blog",GET_DETAIL:"/blog/:blogId",CREATE:"/blog",UPDATE:"/blog/:blogId",DELETE:"/blog/:blogId"};e["Z"]={getBlogs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1},e=t.page,a=void 0===e?1:e,r=t.userId,o=t.atIndex;return(0,n.Z)(s.GET_LIST,"GET",{page:a,userId:r,atIndex:o})},getIndexBlogs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1},e=t.page,a=void 0===e?1:e;return this.getBlogs({page:a,atIndex:!0})},getBlogsByUserId:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:1},a=e.page,n=void 0===a?1:a,s=e.atIndex;return this.getBlogs({userId:t,page:n,atIndex:s})},getDetail:function(t){var e=t.blogId;return(0,n.Z)(s.GET_DETAIL.replace(":blogId",e))},updateBlog:function(t,e){var a=t.blogId,r=e.title,o=e.content,i=e.description,l=e.atIndex;return(0,n.Z)(s.UPDATE.replace(":blogId",a),"PATCH",{title:r,content:o,description:i,atIndex:l})},deleteBlog:function(t){var e=t.blogId;return(0,n.Z)(s.DELETE.replace(":blogId",e),"DELETE")},createBlog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",content:"",description:"",atIndex:!1},e=t.title,a=void 0===e?"":e,r=t.content,o=void 0===r?"":r,i=t.description,l=void 0===i?"":i,g=t.atIndex,d=void 0!==g&&g;return(0,n.Z)(s.CREATE,"POST",{title:a,content:o,description:l,atIndex:d})}}}}]);
//# sourceMappingURL=377-legacy.d30cf729.js.map