"use strict";(self["webpackChunkblog_client"]=self["webpackChunkblog_client"]||[]).push([[280],{8280:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"index"}},[n("div",{attrs:{id:"topAnchor"}}),t._m(0),n("section",{staticClass:"blog-posts"},t._l(t.blogs,(function(e){return n("router-link",{staticClass:"item",attrs:{to:"/detail/"+e.id}},[n("figure",{staticClass:"avatar"},[n("img",{attrs:{src:e.user.avatar,alt:e.user.username}}),n("figcaption",[t._v(t._s(e.user.username))])]),n("h3",[t._v(t._s(e.title)),n("span",[t._v(" "+t._s(t.friendlyDate(e.createdAt)))])]),n("p",[t._v(t._s(e.description))])])})),1),n("section",{staticClass:"pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total/2,"current-page":t.page},on:{"current-change":t.onPageChange}})],1)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("a",{attrs:{href:"#topAnchor"}},[t._v("ï¸½")])])}],r=n(7491),i={data:function(){return{blogs:[],total:0,page:1}},created:function(){var t=this;this.page=parseInt(this.$route.query.page)||1,r.Z.getIndexBlogs({page:this.page}).then((function(e){t.blogs=e.data,t.total=e.total,t.page=e.page}))},methods:{onPageChange:function(t){var e=this;r.Z.getIndexBlogs({page:t}).then((function(n){console.log(n),e.blogs=n.data,e.total=n.total,e.page=n.page,e.$router.push({path:"/",query:{page:t}})}))}}},l=i,s=n(1001),g=(0,s.Z)(l,a,o,!1,null,"2cff4fb5",null),d=g.exports},7491:function(t,e,n){n(4916),n(5306),n(2526),n(1817);var a=n(8505),o={GET_LIST:"/blog",GET_DETAIL:"/blog/:blogId",CREATE:"/blog",UPDATE:"/blog/:blogId",DELETE:"/blog/:blogId"};e["Z"]={getBlogs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1},e=t.page,n=void 0===e?1:e,r=t.userId,i=t.atIndex;return(0,a.Z)(o.GET_LIST,"GET",{page:n,userId:r,atIndex:i})},getIndexBlogs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1},e=t.page,n=void 0===e?1:e;return this.getBlogs({page:n,atIndex:!0})},getBlogsByUserId:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:1},n=e.page,a=void 0===n?1:n,o=e.atIndex;return this.getBlogs({userId:t,page:a,atIndex:o})},getDetail:function(t){var e=t.blogId;return(0,a.Z)(o.GET_DETAIL.replace(":blogId",e))},updateBlog:function(t,e){var n=t.blogId,r=e.title,i=e.content,l=e.description,s=e.atIndex;return(0,a.Z)(o.UPDATE.replace(":blogId",n),"PATCH",{title:r,content:i,description:l,atIndex:s})},deleteBlog:function(t){var e=t.blogId;return(0,a.Z)(o.DELETE.replace(":blogId",e),"DELETE")},createBlog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",content:"",description:"",atIndex:!1},e=t.title,n=void 0===e?"":e,r=t.content,i=void 0===r?"":r,l=t.description,s=void 0===l?"":l,g=t.atIndex,d=void 0!==g&&g;return(0,a.Z)(o.CREATE,"POST",{title:n,content:i,description:s,atIndex:d})}}}}]);
//# sourceMappingURL=280-legacy.22d49727.js.map